%! Author = Mateusz
%! Date = 19/11/2025

\subsection{Panel użytkownika}
\label{subsec:panel-uzytkownika-frontend}

W niniejszym rozdziale przedstawiono implementację panelu użytkownika na frontendzie.\newline

Kolejnym z głównych modółów aplikacji jest panel użytkownika.
Został on podzielony na 8 zakładek:

\begin{itemize}
    \item Profile - profil użytkownika wraz z możliwością zmiany zdjęcia profilowego,
    \item Spots - lista z spotami dodanymi do list (np. ulubionych, do ponownego odwiedzenia),
    \item Photos - lista zdjęć które użytkownik doddał do spotów, komentarzy pod spotami oraz na forum,
    \item Movies - lista filmów które użytkownik doddał do spotów, komentarzy pod spotami oraz na forum,
    \item Social - listy z znajomymi, obserwowanymi i obserwującymi,
    \item Add spot - lista ze spotami które dodał użytkownik oraz formularz do dodania nowego spota,
    \item Comments - lista komentarzy które użytkownik dodał pod spotami,
    \item Settings - ustawienia użytkownika (zmiana: nazwy użytkownika, e-mail, hasła),
\end{itemize}

\subsubsection{Profile}
Profil użytkownika został zbudowany z pięciu komponentów:
- UserOwnProfile
- ProfileForViewer
- Profile
- ProfileStats
- MostPopularImage

\texttt{UserOwnProfile} - Jest to komponent używany do wyświetlenia własnego profilu uzytkownika.
JEst on bardzo prosto zbudowany korzysta tylko z komponentu Profile (numer) który jest uniwersalny
dla obu widoków.
Dodatkowo znajduje się tam pasek ładowania informujący o postępie ładowania.
Całe dane są pobierane za pomocą hooka useQuery z bibiloteki tanstack query,
korzysta on z funkcji "getUserOwnProfile" która nie przyjmuje rzadnych parametrów.

\texttt{ProfileForViewer} - Ten komponent jest używany do wyśwetlenia profilu innego użytkownika.
Poza tym co zawiera komponet USerOwnProfile ten zawera dodatkowo komponenty:
-Button - który jest przekazywany do Profil za pomocą propu children,
-Modal.
Znajdują się tam dwa przyciski które w zależności od tego czy użytkownik jest zalogowany
i czy obserwuje bądź ma go w znajomych wyśwetlają stosowne informacje na przyciskach.
Komponent modal wyśwetla się jeżeli użytkownik chce usunąć znajomego lub przestać obserwować,
wyśwetla się wtedy komunikat czy napewno chce to zrobić.
Jeżeli profil o danej nazwie użytkownika nie istnieje wyśwetla się komunikat "No profile data available".
Do pobrania informacji o profilu tutaj również wykorzystano hook useQuery, nazwa uśytkownika jest pobierana z
ścieżki URL za pomocą hooka useParams.
Jeżeli pobrane dane zawieraja informację że jest to profil własny użytkownika to za
pomocą hooka useNavigate w useEffect zostaje on przeniesiony na adres "/account/profile"
Natomiast do edycji danych:
- edycji statusu znajomego - funkcja "changeUserFriendsStatus"
- edycji stnu obserwacji - funckja "editUserFollowed"
- edycji stanu znajomego - funkcja "editUserFriends"
wykorzystano hook useMutation.
Przy błędzie wyświetlana jest stosowna informacja w zalezności czego ten błąd dotyczy i za pomocą
dispatcha z reduxa wyświetlany w komponencie Notification.

\texttt{Profile} - jest to główny komponent używany w tej sekcji panelu użytkownika
ponieważ jest używany w obu wariantach.
Jest tutaj używany hook useMutation do zmiany zdjęcia profilowego ale
tylko i wyłacznie jeżeli jest to profil własny użytkownika, wtedy po najechaniu
na zjęcie profilowe pojawi się komunikat "Change profile photo." a po kliknięciu w
ten komunikat wyświetli się okno do wyboru nowego zdjęcia profilowego.
Komponent ten korzysta również z uniwersalnego komponentu AccountWrapper który jest używany w każdej
sekcji panelu uzytkownika dzięki czemu widok jest powtarzalny bez powtarzania tych samych komponentów.
Następnie wyśwetlają się cztery komponenty ProfileStat które wyśwetlają informacje o liczbie
danych rzeczy w panelu użytkownika.
Na samym dole wyśwetla się komunikat "most popular photos" a pod nim
albo komunikat "This user hasn't added any photos." jezeli jest to konto innego użytkownika albo
"You haven't added any photos" jeżeli jest to konto własne.
Jeżeli użytkownik posiada liste zdjęć to za pomocą komponentu MostPopularImage wyśweitlą się cztery
najpopularniajesze zdjęcia użytkownika.

\texttt{ProfileStat} - komponent ten służy do wyświetlania informacji o liczbie
obserwowanych, obserwujacych, znajomych oraz djeć danego użytkownika.
przyjmuje on 3 propy:
- value - liczbę
- label - nazwę kategorii
- onClick - funkcję która uruchomi się po kliknieciu w ten element

\texttt{MostPopularImage} - komponent służy do wyświetlenia zdjęć wraz z jego statystykami.
Przyjmuje on tylko jednego propa: image - zjęcie z listy czterach najpopularniajeszych zdjęć.
Wyświetla on zdjęcie a na nim za pomocą klasy relative wyświetla liczbę polubień oraz
wyświetleń zdjęcia wraz z odpowiednimi ikonkami.

\subsubsection{Spots}
KOmponent Spots składa się z 3 głównych komponentów:
- FavoriteSpots
- FavoriteSpotTile
- FavoriteSpotTags

\texttt{FavoriteSpots} - Jest to główny komponent tej sekcji który składa wszystko w jedno.
Na samej górze znajduje się lista "menuTypes" która służy do wyśweitlenia przycisków nawigacyjnych
do przełaczania różnego typu list;
Wybarany aktualnie typ listy jest przechowywany w tym tomponencie za pomocą hooka useState.
Do pobrania danych z backendu użyto hooka useInfinityQuery z biblioteki Tanstack Query,
co pozowliło w łatwy sposób zaimplementować infinity scrolla.
TAk jak w Profilu cały ten komponent jest opakowany w komponent AccountWrapper,
ale tutaj jest jeszcze dodatakowo AccountTitle który wyświetla nagłówek danej podstorny.
Nastęnie wyśwetlane są przyciski służące do zmiany typu listy za pomocą komponentu Button.
Przy pierwszym ładowaniu strony oraz przy ładowaniu kolejnych stron danych pokazuje się Loading spinner.
Jeżeli użytkownik nie posiada żadnych dodanych spotów poajwia się komunikat:
"You don't have any spots in your list." w przeciwnym razie zostaną wyświetlnone
kafelki spotów za pomocą komponentu FavoriteSpotTile.

\texttt{FavoriteSpotTile} - Przyjmuje on dwa parametry:
-spot
- selectedType
Do usnięcia danego spota z którejkolwiek listy wykorzystano hook useMutatnion
przyjmuje ona funkcję "editFavoriteSpotList" która przyjmuje następujące parametry:
- type - typ listy
- spotId - identyfikator spota
- operationType - typ operacji (dodanie lub usunięcie).
Wyśweitlają się na nim następujące informacje:
- zdjęcie
- liczba wyświetleń
- lokaalizacja
- śrenia ocen
- nazwa spota
- tagi spota (numer komponentu)
- przycisk do zobaczenia spota na mapie
- przycisk do usunięcia spota z listy
Wyśwetla się tu również okno modalne które służy do potwierdznei usunięcia spota z danej listy,
informacja czy modal jest otwarty przechowuje się w stanie hooka useBoolean.

\texttt{FavoriteSpotTags} - przyjmuje on tylko listę tagów które, wyśwetla tylko ich nazwę w liście

\subsubsection{Photos}
Zdjęcia składają się z trzech głównych komponentów:
- Photos
- Media
- Photo

\texttt{Photos} - Bardzo prosty komponent który wyświetla komponent Media,
dane są pobierane za pomocą useInfiniteQuery dzięki czemu korzysta z infinite scrolla.
W useEffect za pomocą dispatcha z biblioteki redux ustawiany jest komunikat o błędzie,
jeżeli takowy się pokaże.

\texttt{Photo} - przyjmuje on tylko jeden parametr: photo czyli zdjęcie z listy.
Wyśwetla on zdjęcie z listy a na zdjęciu za pomocą klas relative i absolute
ukazuje pasek z informacją o liczbie polubień oraz liczbie wyświetleń wraz
z odpowiednimi ikonami.

\texttt{Media} - Jest to uniwersalny komponent dla zdjęć oraz filmów użytkownika.
Przyjmuje on osiem parametrów:
- variant - używany do komponentu AccountWrapper
- searchDate - obiekt który przetrzymuje dane do filtrowania po dacie
- onSortChange - funkcja używana do sortowania
- onDateChange - funckja używana do ustawienia filtrowania po dacie
- isLoading - informuje czy dane sę pobierane
- mediaList - typ który określa czy są to zdjęcia czy filmy
- loadMoreRef
- isFetchingNextPage - informuje czy pobiera kolejną stronę z danych użytkownika
Tak jak w pozostałych sekcjach korzysta on z AccountWrapper do opakowania całego widoku w identyczny wygkląd.
Korzysta również z komponentu AccountTitle wyświetla on albo "Photos" albo "Movies"
w zależności od typu wariantu.
NAstępnie wyświetla komponent SortAndDateFilters które wyświetlają panel sortowania
oraz kormularze do wyboru daty od oraz do służące do filtrowania.
Wtedy jest wyśweitlana jest lista filmów lub zdjęć które są zgrupowne po
dacie Za pomocą komponentu DateBadge który przyjmuje datę i ją wyświetla.
Wtedy w liście w zależności od tego czy variat to zdjęcia czy filmy wyświetla odwpowieni
komponent (Photos lub Movies).
Jeżeli użytkownik nie posiada żadnych mediów wyświetla się komunikat:
"You haven't added any (photos lub movies)".
Jak dane się ładują albo ładuje się kolejna strona danych pokazuje sie komponent LoadingSpinner.

\subsubsection{Movies}
\subsubsection{Social}
\subsubsection{Add spot}
\subsubsection{Comments}
\subsubsection{Settings}