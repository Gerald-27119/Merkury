%! Author = Mateusz
%! Date = 30/11/2025

\noindent\textbf{Konto użytkownika – rejestracja, logowanie, hasło}

\cardendpoint
{EP75}
{/public/account/register}
{Zarejestruj nowego użytkownika}
{%
    \begin{tabitemize}
        \item \textbf{body}: UserRegisterDto (JSON), zawiera:
        \begin{itemize}
            \item \textbf{username}: String (3–16 znaków, litery/cyfry/\_)
            \item \textbf{email}: String (poprawny adres e-mail)
            \item \textbf{password}: String (8–16 znaków, min. jedna cyfra, mała i duża litera oraz znak specjalny)
        \end{itemize}
    \end{tabitemize}
}
{Brak}
{201 Created, 401 Unauthorized, 409 Conflict, 422 Unprocessable Entity, 500 Internal Server Error}
{%
    \begin{tabitemize}
        \item \textbf{body}: String (komunikat, np. \texttt{"User registered successfully"})
        \item JWT tokeny ustawione w ciasteczkach HTTP-only (automatyczne zalogowanie)
    \end{tabitemize}
}

\cardendpoint
{EP76}
{/public/account/login}
{Zaloguj użytkownika}
{%
    \begin{tabitemize}
        \item \textbf{body}: UserLoginDto (JSON), zawiera:
        \begin{itemize}
            \item \textbf{username}: String
            \item \textbf{password}: String
        \end{itemize}
    \end{tabitemize}
}
{Brak}
{200 OK, 401 Unauthorized, 422 Unprocessable Entity}
{%
    \begin{tabitemize}
        \item Brak (pusta odpowiedź w body)
        \item JWT tokeny zwrócone w ciasteczkach HTTP-only
    \end{tabitemize}
}

\cardendpoint
{EP77}
{/account/login-success}
{Obsłuż pomyślne logowanie OAuth2 i przekieruj użytkownika}
{Brak}
{Brak}
{302 Found, 404 Not Found, 409 Conflict, 422 Unprocessable Entity, 500 Internal Server Error}
{%
    \begin{tabitemize}
        \item \textbf{Redirect}: przekierowanie na stronę po zalogowaniu (\texttt{afterLoginPageUrl} z konfiguracji)
    \end{tabitemize}
}

\cardendpoint
{EP78}
{/public/account/forgot-password}
{Rozpocznij procedurę resetu hasła (wyślij link na e-mail)}
{%
    \begin{tabitemize}
        \item \textbf{body}: String (adres e-mail użytkownika w treści żądania)
    \end{tabitemize}
}
{Brak}
{200 OK, 404 Not Found, 422 Unprocessable Entity, 500 Internal Server Error}
{%
    \begin{tabitemize}
        \item \textbf{body}: String (komunikat, np. \texttt{"Password reset link sent to: user@example.com"})
        \item Link resetujący hasło wysłany na podany adres e-mail
    \end{tabitemize}
}

\cardendpoint
{EP79}
{/public/account/set-new-password}
{Ustaw nowe hasło użytkownika na podstawie tokenu resetującego}
{%
    \begin{tabitemize}
        \item \textbf{body}: UserPasswordResetDto (JSON), zawiera:
        \begin{itemize}
            \item \textbf{token}: String (UUID – token resetu hasła)
            \item \textbf{password}: String (8–16 znaków, min. jedna cyfra, mała i duża litera oraz znak specjalny)
        \end{itemize}
    \end{tabitemize}
}
{Brak}
{200 OK, 400 Bad Request, 404 Not Found, 422 Unprocessable Entity}
{%
    \begin{tabitemize}
        \item \textbf{body}: String (komunikat, np. \texttt{"Password set successfully!"})
    \end{tabitemize}
}

\cardendpoint
{EP80}
{/account/check}
{Sprawdź, czy użytkownik jest uwierzytelniony}
{Brak}
{Brak}
{200 OK, 401 Unauthorized, 403 Forbidden}
{%
    \begin{tabitemize}
        \item Brak (pusta odpowiedź; sam status informuje o uwierzytelnieniu)
    \end{tabitemize}
}
