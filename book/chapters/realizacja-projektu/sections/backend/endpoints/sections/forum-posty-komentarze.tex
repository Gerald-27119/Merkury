%! Author = Mateusz
%! Date = 30/11/2025

\subsubsection{Forum – komentarze do postów}
\label{subsubsec:forum-komentarze}

\cardendpoint
{EP25}
{/public/post/\{postId\}/comments}
{Pobierz stronicowaną listę komentarzy posta}
{%
    \begin{tabitemize}
        \item \textbf{postId}: Long (identyfikator posta w ścieżce URL)
    \end{tabitemize}
}
{%
    \begin{tabitemize}
        \item \textbf{page}: Integer (numer strony, domyślnie 0)
        \item \textbf{size}: Integer (liczba komentarzy na stronie, domyślnie 10)
        \item \textbf{sortBy}: PostCommentSortField (pole sortowania, domyślnie \texttt{PUBLISH\_DATE})
        \item \textbf{sortDirection}: SortDirection (kierunek sortowania, domyślnie \texttt{DESC})
    \end{tabitemize}
}
{200 OK, 404 Not Found}
{%
    \begin{tabitemize}
        \item \textbf{Page<PostCommentGeneralDto>}, każdy element zawiera:
        \begin{itemize}
            \item \textbf{id}: Long (identyfikator komentarza)
            \item \textbf{content}: String (treść komentarza)
            \item \textbf{upVotes}: Integer (liczba głosów w górę)
            \item \textbf{downVotes}: Integer (liczba głosów w dół)
            \item \textbf{repliesCount}: Integer (liczba odpowiedzi)
            \item \textbf{publishDate}: LocalDateTime (data publikacji)
            \item \textbf{author}: AuthorDto (dane autora)
            \item \textbf{isAuthor}: Boolean (czy bieżący użytkownik jest autorem)
            \item \textbf{isUpVoted}: Boolean (czy użytkownik zagłosował w górę)
            \item \textbf{isDownVoted}: Boolean (czy użytkownik zagłosował w dół)
            \item \textbf{isReply}: Boolean (czy komentarz jest odpowiedzią)
            \item \textbf{isDeleted}: Boolean (czy komentarz został usunięty logicznie)
        \end{itemize}
    \end{tabitemize}
}

\cardendpoint
{EP26}
{/post/\{postId\}/comments}
{Dodaj nowy komentarz do posta}
{%
    \begin{tabitemize}
        \item \textbf{postId}: Long (identyfikator posta w ścieżce URL)
        \item \textbf{body}: PostCommentDto, zawiera:
        \begin{itemize}
            \item \textbf{content}: String (treść komentarza)
        \end{itemize}
    \end{tabitemize}
}
{Brak}
{201 Created, 400 Bad Request, 404 Not Found, 422 Unprocessable Entity}
{Brak (pusta odpowiedź)}

\cardendpoint
{EP27}
{/post/comments/\{commentId\}}
{Edytuj istniejący komentarz do posta}
{%
    \begin{tabitemize}
        \item \textbf{commentId}: Long (identyfikator komentarza w ścieżce URL)
        \item \textbf{body}: PostCommentDto, zawiera:
        \begin{itemize}
            \item \textbf{content}: String (treść komentarza)
        \end{itemize}
    \end{tabitemize}
}
{Brak}
{200 OK, 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found, 422 Unprocessable Entity}
{Brak (pusta odpowiedź)}

\cardendpoint
{EP28}
{/post/comments/\{commentId\}/vote}
{Oddaj głos na komentarz (góra/dół)}
{%
    \begin{tabitemize}
        \item \textbf{commentId}: Long (identyfikator komentarza w ścieżce URL)
    \end{tabitemize}
}
{%
    \begin{tabitemize}
        \item \textbf{isUpvote}: boolean (true = głos w górę, false = głos w dół)
    \end{tabitemize}
}
{200 OK, 403 Forbidden, 404 Not Found}
{Brak (pusta odpowiedź)}

\cardendpoint
{EP29}
{/comments/\{commentId\}/replies}
{Dodaj odpowiedź na komentarz}
{%
    \begin{tabitemize}
        \item \textbf{commentId}: Long (identyfikator komentarza nadrzędnego w ścieżce URL)
        \item \textbf{body}: PostCommentDto, zawiera:
        \begin{itemize}
            \item \textbf{content}: String (treść komentarza)
        \end{itemize}
    \end{tabitemize}
}
{Brak}
{201 Created, 400 Bad Request, 404 Not Found, 409 Conflict, 422 Unprocessable Entity}
{Brak (pusta odpowiedź)}
